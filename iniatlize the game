local Plrs = game:GetService("Players")
local SSS = game:GetService("ServerScriptService")
local AbilitiesModuel = require(SSS.AnimeCharacters.AbilitiesBasic)
local AbilitiesExtraFunc = require(SSS.AnimeCharacters.AbilitiesHelper)
local UpgradeData = require(SSS.AnimeCharacters.UpgradeData)


local function InitializeWeapons(Plr,ChrName)
	if ChrName.Value == "Luffy" then
		AbilitiesExtraFunc.AddWeapon(Plr,"Punch")
	end
end

local function ManageXp(Plr)
	local Lv = Instance.new("NumberValue")
	Lv.Parent = Plr
	Lv.Name = "Level"
	Lv.Value = 1
	local Xp = Instance.new("NumberValue")
	Xp.Parent = Plr
	Xp.Name = "Xp"
	Xp.Value = 0
	Xp.Changed:Connect(function()
		if Xp.Value >= Lv.Value * 100 then
			Xp.Value = Xp.Value - Lv.Value * 100
			Lv.Value = Lv.Value + 1
		end
	end)
end

Plrs.PlayerAdded:Connect(function(Plr)
	local CharacterName = Instance.new("StringValue")
	CharacterName.Name = "CharacterName"
	CharacterName.Parent = Plr
	CharacterName.Value = "Luffy"

	local Weapons = Instance.new("Folder")
	Weapons.Name = "Weapons"
	Weapons.Parent = Plr

	ManageXp(Plr)
	InitializeWeapons(Plr,CharacterName)
	
end)
